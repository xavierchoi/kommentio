!function(){"use strict";class e{constructor(e={}){this.currentLanguage=e.defaultLanguage||"en",this.fallbackLanguage=e.fallbackLanguage||"en",this.translations=new Map,this.loadedLanguages=new Set,this.supportedLanguages=["ko","en","ja","zh","es","fr","de","pt"],this.languageNames={ko:"한국어",en:"English",ja:"日本語",zh:"中文",es:"Español",fr:"Français",de:"Deutsch",pt:"Português"},this.detectBrowserLanguage()}detectBrowserLanguage(){if("undefined"!=typeof navigator){const e=(navigator.language||navigator.userLanguage).split("-")[0];this.supportedLanguages.includes(e)&&(this.currentLanguage=e)}}loadLanguage(e,n){return!!this.supportedLanguages.includes(e)&&(this.translations.set(e,n),this.loadedLanguages.add(e),!0)}setLanguage(e){return!!this.supportedLanguages.includes(e)&&(this.currentLanguage=e,!0)}getLanguage(){return this.currentLanguage}getSupportedLanguages(){return[...this.supportedLanguages]}getLanguageName(e){return this.languageNames[e]||e}getValue(e,n){return n.split(".").reduce(((e,n)=>e&&void 0!==e[n]?e[n]:null),e)}interpolate(e,n={}){return"string"!=typeof e?e:e.replace(/\{\{(\w+)\}\}/g,((e,t)=>n.hasOwnProperty(t)?n[t]:e))}t(e,n={},t=null){const o=t||this.currentLanguage;let i=null;return this.translations.has(o)&&(i=this.getValue(this.translations.get(o),e)),null===i&&o!==this.fallbackLanguage&&this.translations.has(this.fallbackLanguage)&&(i=this.getValue(this.translations.get(this.fallbackLanguage),e)),null===i?e:this.interpolate(i,n)}timeAgo(e){const n=new Date,t=Math.floor((n-new Date(e))/1e3);if(t<60)return this.t("comment.timeAgo.justNow");if(t<3600){const e=Math.floor(t/60);return this.t("comment.timeAgo.minutesAgo",{count:e})}if(t<86400){const e=Math.floor(t/3600);return this.t("comment.timeAgo.hoursAgo",{count:e})}if(t<604800){const e=Math.floor(t/86400);return this.t("comment.timeAgo.daysAgo",{count:e})}if(t<2592e3){const e=Math.floor(t/604800);return this.t("comment.timeAgo.weeksAgo",{count:e})}if(t<31536e3){const e=Math.floor(t/2592e3);return this.t("comment.timeAgo.monthsAgo",{count:e})}{const e=Math.floor(t/31536e3);return this.t("comment.timeAgo.yearsAgo",{count:e})}}isRTL(e=null){const n=e||this.currentLanguage;return["ar","he","fa","ur"].includes(n)}}const n={ko:{comment:{title:"댓글",writeComment:"댓글을 작성하세요...",submitComment:"댓글 작성",submitting:"작성 중...",reply:"답글",replying:"답글 작성 중...",replyTo:"{{user}}님에게 답글",like:"좋아요",likes:"좋아요 {{count}}개",anonymous:"익명",timeAgo:{justNow:"방금 전",minutesAgo:"{{count}}분 전",hoursAgo:"{{count}}시간 전",daysAgo:"{{count}}일 전",weeksAgo:"{{count}}주 전",monthsAgo:"{{count}}개월 전",yearsAgo:"{{count}}년 전"}},auth:{loginWith:"{{provider}}(으)로 로그인",signIn:"로그인",signOut:"로그아웃",cancel:"취소",user:"사용자",anonymous:"익명으로 댓글 작성",loginRequired:"댓글을 작성하려면 로그인하세요",unsupportedProvider:"지원하지 않는 로그인 방식입니다.",noProvidersConfigured:"로그인 옵션이 설정되지 않았습니다.",loginSuccessMock:"{{provider}} 로그인 완료! (Mock 모드) 🎉",providers:{google:"Google",apple:"Apple",github:"GitHub",twitter:"X.com",facebook:"Facebook",linkedin:"LinkedIn",kakao:"Kakao"}},messages:{success:{commentCreated:"댓글이 성공적으로 작성되었습니다! ✅",commentDeleted:"댓글이 삭제되었습니다.",commentLiked:"댓글에 좋아요를 눌렀습니다.",commentUnliked:"좋아요를 취소했습니다."},error:{commentFailed:"댓글 작성에 실패했습니다.",loginFailed:"로그인에 실패했습니다.",loadFailed:"댓글을 불러오는데 실패했습니다.",networkError:"네트워크 오류가 발생했습니다."},spam:{detected:"스팸으로 감지된 댓글입니다. 관리자 승인 후 게시됩니다. ⚠️",reviewing:"관리자 검토 중인 댓글입니다."}},placeholder:{markdown:"**볼드**, *이탤릭*, `코드`, ```코드블록```, > 인용구, [링크](url)"},tabs:{write:"✏️ 작성",preview:"👁️ 미리보기"},keyboard:{shortcuts:"Ctrl+Enter: 댓글 등록"},demo:{author:"자비에",comments:["어서오세요! Kommentio는 8개의 소셜 로그인과 AI 스팸 필터링을 지원하는 댓글 위젯 시스템입니다!","또한 **마크다운** 문법 *일부*를 지원하고 있습니다.","원하는 텍스트를 **볼드** 혹은 *이탤릭* 처리해보세요. 인용문도 생성할 수 있습니다.","기술 블로거들을 위해 구현된 `코드 인라인`과 ```코드 스니펫 블록```도 체험해보세요!","레오나르도 다 빈치의 말처럼:\n> 단순함은 궁극적인 정교함입니다.","이것이 Kommentio의 개발 모토입니다.","더 자세한 내용은 제 [Github 페이지](https://github.com/xavierchoi/kommentio)에서 확인하세요!","아 참, **Readme 파일**을 읽는 것 잊지 마세요.","마지막으로, **Kommentio**는 완전한 **오픈소스 프로젝트**입니다.","*진짜 마지막으로*, **무료**인데다가 **광고도 없다**는 걸 알아주세요! 지원하는 답글 계층은 *여기까지입니다*."],realtime:["실시간 업데이트 테스트입니다! 👋","Mock 모드에서도 실시간 기능이 잘 동작하네요!","새로운 댓글이 자동으로 추가되었습니다.","Kommentio 실시간 업데이트 데모 중...","이 댓글은 30초마다 자동으로 생성됩니다."],authors:["실시간테스터","자동댓글봇","Mock사용자","데모계정"]}},en:{comment:{title:"Comments",writeComment:"Write a comment...",submitComment:"Post Comment",submitting:"Posting...",reply:"Reply",replying:"Replying...",replyTo:"Reply to {{user}}",like:"Like",likes:"{{count}} likes",anonymous:"Anonymous",timeAgo:{justNow:"just now",minutesAgo:"{{count}} minutes ago",hoursAgo:"{{count}} hours ago",daysAgo:"{{count}} days ago",weeksAgo:"{{count}} weeks ago",monthsAgo:"{{count}} months ago",yearsAgo:"{{count}} years ago"}},auth:{loginWith:"Sign in with {{provider}}",signIn:"Sign In",signOut:"Sign Out",cancel:"Cancel",user:"User",anonymous:"Comment anonymously",loginRequired:"Please sign in to leave a comment",unsupportedProvider:"Unsupported login method.",noProvidersConfigured:"No login options configured.",loginSuccessMock:"{{provider}} login completed! (Mock mode) 🎉",providers:{google:"Google",apple:"Apple",github:"GitHub",twitter:"X.com",facebook:"Facebook",linkedin:"LinkedIn",kakao:"Kakao"}},messages:{success:{commentCreated:"Comment posted successfully! ✅",commentDeleted:"Comment deleted.",commentLiked:"Comment liked.",commentUnliked:"Like removed."},error:{commentFailed:"Failed to post comment.",loginFailed:"Login failed.",loadFailed:"Failed to load comments.",networkError:"Network error occurred."},spam:{detected:"Comment flagged as spam. Pending admin approval. ⚠️",reviewing:"Comment under admin review."}},placeholder:{markdown:"**bold**, *italic*, `code`, ```code block```, > quote, [link](url)"},tabs:{write:"✏️ Write",preview:"👁️ Preview"},keyboard:{shortcuts:"Ctrl+Enter: Post"},demo:{author:"Xavier",comments:["Welcome! Kommentio is a comment widget system that supports 8 social logins and AI spam filtering!","It also supports **some** *markdown* syntax.","Try making text **bold** or *italic*. You can also create quotes.","Experience `inline code` and ```code snippet blocks``` designed for tech bloggers!","As Leonardo da Vinci said:\n> Simplicity is the ultimate sophistication.","This is Kommentio's development motto.","For more details, check out my [Github page](https://github.com/xavierchoi/kommentio)!","Oh, don't forget to read the **README file**.","Finally, **Kommentio** is a completely **open source project**.","*Really finally*, please note that it's **free** and has **no ads**! This is as deep as the reply hierarchy goes."],realtime:["Real-time update test! 👋","Real-time features work well even in Mock mode!","A new comment has been automatically added.","Kommentio real-time update demo in progress...","This comment is automatically generated every 30 seconds."],authors:["RealtimeTester","AutoCommentBot","MockUser","DemoAccount"]}},ja:{comment:{title:"コメント",writeComment:"コメントを書く...",submitComment:"コメント投稿",submitting:"投稿中...",reply:"返信",replying:"返信中...",replyTo:"{{user}}さんに返信",like:"いいね",likes:"いいね{{count}}個",anonymous:"匿名",timeAgo:{justNow:"たった今",minutesAgo:"{{count}}分前",hoursAgo:"{{count}}時間前",daysAgo:"{{count}}日前",weeksAgo:"{{count}}週間前",monthsAgo:"{{count}}ヶ月前",yearsAgo:"{{count}}年前"}},auth:{loginWith:"{{provider}}でログイン",signIn:"ログイン",signOut:"ログアウト",cancel:"キャンセル",user:"ユーザー",anonymous:"匿名でコメント",loginRequired:"コメントするにはログインしてください",unsupportedProvider:"サポートされていないログイン方法です。",noProvidersConfigured:"ログインオプションが設定されていません。",loginSuccessMock:"{{provider}}ログイン完了！（Mockモード）🎉",providers:{google:"Google",apple:"Apple",github:"GitHub",twitter:"X.com",facebook:"Facebook",linkedin:"LinkedIn",kakao:"Kakao"}},messages:{success:{commentCreated:"コメントが正常に投稿されました！ ✅",commentDeleted:"コメントが削除されました。",commentLiked:"コメントにいいねしました。",commentUnliked:"いいねを取り消しました。"},error:{commentFailed:"コメントの投稿に失敗しました。",loginFailed:"ログインに失敗しました。",loadFailed:"コメントの読み込みに失敗しました。",networkError:"ネットワークエラーが発生しました。"},spam:{detected:"スパムとして検出されました。管理者の承認後に公開されます。 ⚠️",reviewing:"管理者による審査中のコメントです。"}},placeholder:{markdown:"**太字**, *斜体*, `コード`, ```コードブロック```, > 引用, [リンク](url)"},tabs:{write:"✏️ 作成",preview:"👁️ プレビュー"},keyboard:{shortcuts:"Ctrl+Enter: 投稿"},demo:{author:"ザビエル",comments:["いらっしゃいませ！Kommentioは8つのソーシャルログインとAIスパムフィルタリングをサポートするコメントウィジェットシステムです！","また、**マークダウン** 記法の *一部* をサポートしています。","テキストを **太字** や *斜体* にしてみてください。引用文も作成できます。","技術ブロガー向けに実装された `インラインコード` と ```コードスニペットブロック``` も体験してみてください！","レオナルド・ダ・ヴィンチの言葉のように：\n> シンプルさは究極の洗練である。","これがKommentioの開発モットーです。","詳細については私の[Githubページ](https://github.com/xavierchoi/kommentio)をご確認ください！","あ、**READMEファイル**を読むことを忘れないでください。","最後に、**Kommentio**は完全な**オープンソースプロジェクト**です。","*本当に最後に*、**無料**で**広告なし**であることを知ってください！返信階層はここまでです。"],realtime:["リアルタイム更新テストです！ 👋","Mockモードでもリアルタイム機能がうまく動作しますね！","新しいコメントが自動的に追加されました。","Kommentioリアルタイム更新デモ中...","このコメントは30秒ごとに自動生成されます。"],authors:["リアルタイムテスター","自動コメントボット","Mockユーザー","デモアカウント"]}},zh:{comment:{title:"评论",writeComment:"写评论...",submitComment:"发表评论",submitting:"发表中...",reply:"回复",like:"点赞",anonymous:"匿名"},auth:{loginWith:"使用{{provider}}登录",signIn:"登录",signOut:"退出",cancel:"取消",user:"用户",unsupportedProvider:"不支持的登录方式。",noProvidersConfigured:"未配置登录选项。",loginSuccessMock:"{{provider}}登录完成！（Mock模式）🎉",providers:{google:"Google",apple:"Apple",github:"GitHub",twitter:"X.com",facebook:"Facebook",linkedin:"LinkedIn",kakao:"Kakao"}},messages:{success:{commentCreated:"评论发表成功！ ✅"},spam:{detected:"评论被标记为垃圾内容，等待管理员审核。 ⚠️"}},placeholder:{markdown:"**粗体**, *斜体*, `代码`, ```代码块```, > 引用, [链接](url)"},tabs:{write:"✏️ 编写",preview:"👁️ 预览"},keyboard:{shortcuts:"Ctrl+Enter: 发表"},demo:{author:"泽维尔",comments:["欢迎！Kommentio是支持8种社交登录和AI垃圾邮件过滤的评论小部件系统！","它还支持**一些** *markdown* 语法。","尝试使文本**粗体**或*斜体*。您还可以创建引用。","体验为技术博主设计的`内联代码`和```代码片段块```！","正如达·芬奇所说：\n> 简约是极致的精致。"],realtime:["实时更新测试！ 👋","Mock模式下实时功能运行良好！"],authors:["实时测试员","自动评论机器人"]}},es:{comment:{title:"Comentarios",writeComment:"Escribe un comentario...",submitComment:"Publicar Comentario",submitting:"Publicando...",reply:"Responder",like:"Me gusta",anonymous:"Anónimo"},auth:{loginWith:"Iniciar sesión con {{provider}}",signIn:"Iniciar Sesión",signOut:"Cerrar Sesión",cancel:"Cancelar",user:"Usuario",unsupportedProvider:"Método de inicio de sesión no compatible.",noProvidersConfigured:"No hay opciones de inicio de sesión configuradas.",loginSuccessMock:"¡Inicio de sesión con {{provider}} completado! (Modo Mock) 🎉",providers:{google:"Google",apple:"Apple",github:"GitHub",twitter:"X.com",facebook:"Facebook",linkedin:"LinkedIn",kakao:"Kakao"}},messages:{success:{commentCreated:"¡Comentario publicado con éxito! ✅"},spam:{detected:"Comentario marcado como spam. ⚠️"}},placeholder:{markdown:"**negrita**, *cursiva*, `código`, ```bloque de código```, > cita, [enlace](url)"},tabs:{write:"✏️ Escribir",preview:"👁️ Vista previa"},keyboard:{shortcuts:"Ctrl+Enter: Publicar"},demo:{author:"Javier",comments:["¡Bienvenidos! Kommentio es un sistema de widgets de comentarios que admite 8 inicios de sesión sociales y filtrado de spam con IA!","También admite **algo** de sintaxis *markdown*.","Intenta poner texto en **negrita** o *cursiva*. También puedes crear citas.","¡Experimenta con `código en línea` y ```bloques de fragmentos de código``` diseñados para bloggers técnicos!","Como dijo Leonardo da Vinci:\n> La simplicidad es la máxima sofisticación."],realtime:["¡Prueba de actualización en tiempo real! 👋","¡Las funciones en tiempo real funcionan bien incluso en modo Mock!"],authors:["ProbadorTiempoReal","BotComentarioAuto"]}},fr:{comment:{title:"Commentaires",writeComment:"Écrire un commentaire...",submitComment:"Publier le Commentaire",submitting:"Publication...",reply:"Répondre",like:"J'aime",anonymous:"Anonyme"},auth:{loginWith:"Se connecter avec {{provider}}",signIn:"Se Connecter",signOut:"Se Déconnecter",cancel:"Annuler",user:"Utilisateur",unsupportedProvider:"Méthode de connexion non prise en charge.",noProvidersConfigured:"Aucune option de connexion configurée.",loginSuccessMock:"Connexion {{provider}} terminée ! (Mode Mock) 🎉",providers:{google:"Google",apple:"Apple",github:"GitHub",twitter:"X.com",facebook:"Facebook",linkedin:"LinkedIn",kakao:"Kakao"}},messages:{success:{commentCreated:"Commentaire publié avec succès ! ✅"},spam:{detected:"Commentaire signalé comme spam. ⚠️"}},placeholder:{markdown:"**gras**, *italique*, `code`, ```bloc de code```, > citation, [lien](url)"},tabs:{write:"✏️ Écrire",preview:"👁️ Aperçu"},keyboard:{shortcuts:"Ctrl+Entrée: Publier"},demo:{author:"Xavier",comments:["Bienvenue ! Kommentio est un système de widget de commentaires qui prend en charge 8 connexions sociales et le filtrage des spams par IA !","Il prend également en charge **une partie** de la syntaxe *markdown*.","Essayez de mettre du texte en **gras** ou en *italique*. Vous pouvez aussi créer des citations.","Découvrez le `code en ligne` et les ```blocs de fragments de code``` conçus pour les blogueurs techniques !","Comme l'a dit Léonard de Vinci :\n> La simplicité est la sophistication ultime."],realtime:["Test de mise à jour en temps réel ! 👋","Les fonctionnalités en temps réel fonctionnent bien même en mode Mock !"],authors:["TesteurTempsRéel","BotCommentaireAuto"]}},de:{comment:{title:"Kommentare",writeComment:"Kommentar schreiben...",submitComment:"Kommentar Veröffentlichen",submitting:"Wird veröffentlicht...",reply:"Antworten",like:"Gefällt mir",anonymous:"Anonym"},auth:{loginWith:"Mit {{provider}} anmelden",signIn:"Anmelden",signOut:"Abmelden",cancel:"Abbrechen",user:"Benutzer",unsupportedProvider:"Nicht unterstützte Anmeldemethode.",noProvidersConfigured:"Keine Anmeldeoptionen konfiguriert.",loginSuccessMock:"{{provider}} Anmeldung abgeschlossen! (Mock-Modus) 🎉",providers:{google:"Google",apple:"Apple",github:"GitHub",twitter:"X.com",facebook:"Facebook",linkedin:"LinkedIn",kakao:"Kakao"}},messages:{success:{commentCreated:"Kommentar erfolgreich veröffentlicht! ✅"},spam:{detected:"Kommentar als Spam markiert. ⚠️"}},placeholder:{markdown:"**fett**, *kursiv*, `code`, ```codeblock```, > zitat, [link](url)"},tabs:{write:"✏️ Schreiben",preview:"👁️ Vorschau"},keyboard:{shortcuts:"Strg+Enter: Veröffentlichen"},demo:{author:"Xavier",comments:["Willkommen! Kommentio ist ein Kommentar-Widget-System, das 8 soziale Anmeldungen und KI-Spam-Filterung unterstützt!","Es unterstützt auch **einige** *Markdown*-Syntax.","Versuchen Sie, Text **fett** oder *kursiv* zu machen. Sie können auch Zitate erstellen.","Erleben Sie `Inline-Code` und ```Code-Snippet-Blöcke```, die für Tech-Blogger entwickelt wurden!","Wie Leonardo da Vinci sagte:\n> Einfachheit ist die ultimative Raffinesse."],realtime:["Echtzeit-Update-Test! 👋","Echtzeit-Funktionen funktionieren auch im Mock-Modus gut!"],authors:["EchtzeitTester","AutoKommentarBot"]}},pt:{comment:{title:"Comentários",writeComment:"Escreva um comentário...",submitComment:"Publicar Comentário",submitting:"Publicando...",reply:"Responder",like:"Curtir",anonymous:"Anônimo"},auth:{loginWith:"Entrar com {{provider}}",signIn:"Entrar",signOut:"Sair",cancel:"Cancelar",user:"Usuário",unsupportedProvider:"Método de login não suportado.",noProvidersConfigured:"Nenhuma opção de login configurada.",loginSuccessMock:"Login com {{provider}} concluído! (Modo Mock) 🎉",providers:{google:"Google",apple:"Apple",github:"GitHub",twitter:"X.com",facebook:"Facebook",linkedin:"LinkedIn",kakao:"Kakao"}},messages:{success:{commentCreated:"Comentário publicado com sucesso! ✅"},spam:{detected:"Comentário marcado como spam. ⚠️"}},placeholder:{markdown:"**negrito**, *itálico*, `código`, ```bloco de código```, > citação, [link](url)"},tabs:{write:"✏️ Escrever",preview:"👁️ Visualizar"},keyboard:{shortcuts:"Ctrl+Enter: Publicar"},demo:{author:"Xavier",comments:["Bem-vindos! Kommentio é um sistema de widget de comentários que suporta 8 logins sociais e filtragem de spam com IA!","Também suporta **alguma** sintaxe *markdown*.","Tente deixar o texto em **negrito** ou *itálico*. Você também pode criar citações.","Experimente `código inline` e ```blocos de snippet de código``` projetados para blogueiros técnicos!","Como Leonardo da Vinci disse:\n> A simplicidade é a máxima sofisticação."],realtime:["Teste de atualização em tempo real! 👋","As funcionalidades em tempo real funcionam bem mesmo no modo Mock!"],authors:["TestadorTempoReal","BotComentárioAuto"]}}};class t{constructor(e={}){this.version="0.3.3",this.options={siteId:null,theme:"light",language:"ko",maxDepth:3,allowAnonymous:!0,supabaseUrl:null,supabaseKey:null,claudeApiKey:null,socialProviders:{google:{enabled:!0,label:"Google",color:"#ffffff",borderColor:"#dadce0",iconColor:"#4285f4",textColor:"#3c4043",hoverColor:"#f8f9fa"},apple:{enabled:!0,label:"Apple",color:"#000000",borderColor:"#000000",iconColor:"#ffffff",textColor:"#ffffff",hoverColor:"#333333"},github:{enabled:!0,label:"GitHub",color:"#24292f",borderColor:"#24292f",iconColor:"#ffffff",textColor:"#ffffff",hoverColor:"#32383f"},twitter:{enabled:!0,label:"X.com",color:"#000000",borderColor:"#000000",iconColor:"#ffffff",textColor:"#ffffff",hoverColor:"#272c30"},facebook:{enabled:!0,label:"Facebook",color:"#1877f2",borderColor:"#1877f2",iconColor:"#ffffff",textColor:"#ffffff",hoverColor:"#166fe5"},linkedin:{enabled:!0,label:"LinkedIn",color:"#0a66c2",borderColor:"#0a66c2",iconColor:"#ffffff",textColor:"#ffffff",hoverColor:"#004182"},kakao:{enabled:!0,label:"Kakao",color:"#fee500",borderColor:"#fee500",iconColor:"#000000",textColor:"#000000",hoverColor:"#fdd800"}},...e},this.container=null,this.comments=[],this.currentUser=null,this.supabase=null,this.initializeI18n(),this.init()}initializeI18n(){this.i18n=new e({defaultLanguage:this.options.language,fallbackLanguage:"en"}),Object.keys(n).forEach((e=>{this.i18n.loadLanguage(e,n[e])})),this.i18n.setLanguage(this.options.language)}t(e,n={}){return this.i18n.t(e,n)}setLanguage(e){return!!this.i18n.setLanguage(e)&&(this.options.language=e,this.mockMode&&(this.initMockData(),this.comments=this.buildCommentTree(this.mockComments)),this.container&&this.render(),!0)}getLanguage(){return this.i18n.getLanguage()}getSupportedLanguages(){return this.i18n.getSupportedLanguages()}timeAgo(e){return this.i18n.timeAgo(e)}async init(){try{this.cleanupUrlFragment(),await this.loadSupabase(),this.createContainer(),this.attachStyles(),this.render(),this.attachEventListeners(),await this.handleOAuthCallback()}catch(e){}}cleanupUrlFragment(){const e=window.location.href;if(e.includes("##")){const n=e.replace("##","#");window.history.replaceState(null,"",n)}window.location.hash.includes("access_token=")&&setTimeout((()=>{const e=window.location.href.split("#")[0];window.history.replaceState(null,"",e)}),5e3)}async handleOAuthCallback(){var e,n,t;if(window.location.hash.includes("access_token=")||window.location.hash.includes("error=")){await new Promise((e=>setTimeout(e,1e3)));try{const{data:{session:o},error:i}=await this.supabase.auth.getSession();if(i)return void this.showNotification("로그인 처리 중 오류가 발생했습니다. 다시 시도해주세요. ⚠️");if(null==o?void 0:o.user){this.currentUser=o.user,this.render();const i=(null==(e=o.user.app_metadata)?void 0:e.provider)||"소셜",a=(null==(n=o.user.user_metadata)?void 0:n.name)||(null==(t=o.user.user_metadata)?void 0:t.full_name)||o.user.email;this.showNotification(`🎉 ${i} 로그인 완료! ${a}님 환영합니다!`),await this.loadComments()}else{const e=new URLSearchParams(window.location.hash.substring(1)),n=e.get("error"),t=e.get("error_description");n?this.showNotification(`로그인 실패: ${t||n} ❌`):this.showNotification("로그인을 완료하지 못했습니다. 다시 시도해주세요. ⚠️")}}catch(o){this.showNotification("로그인 처리 중 문제가 발생했습니다. 페이지를 새로고침해주세요. 🔄")}}}getSocialProviderIcon(e,n=20){return{google:`<svg width="${n}" height="${n}" viewBox="0 0 24 24" fill="none"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>`,apple:'<svg width="100%" height="100%" viewBox="0 0 56 56" fill="none" style="border-radius: 50%; overflow: hidden;">\n        <defs>\n          <style>\n            .apple-bg-light { fill: #ffffff; }\n            .apple-logo-light { fill: #000000; }\n            .apple-bg-dark { fill: #000000; }\n            .apple-logo-dark { fill: #ffffff; }\n            \n            /* 라이트 모드 기본 - 검은 배경에 흰 로고 표시 (바뀜) */\n            .apple-bg-light { display: none; }\n            .apple-logo-light { display: none; }\n            .apple-bg-dark { display: block; }\n            .apple-logo-dark { display: block; }\n            \n            /* 다크 모드 시 - 흰 배경에 검은 로고 표시 (바뀜) */\n            @media (prefers-color-scheme: dark) {\n              .apple-bg-light { display: block; }\n              .apple-logo-light { display: block; }\n              .apple-bg-dark { display: none; }\n              .apple-logo-dark { display: none; }\n            }\n            \n            /* Kommentio 위젯 다크테마 대응 (바뀜) */\n            .kommentio-widget[data-theme="dark"] .apple-bg-light { display: block; }\n            .kommentio-widget[data-theme="dark"] .apple-logo-light { display: block; }\n            .kommentio-widget[data-theme="dark"] .apple-bg-dark { display: none; }\n            .kommentio-widget[data-theme="dark"] .apple-logo-dark { display: none; }\n            \n            .kommentio-widget[data-theme="light"] .apple-bg-light { display: none; }\n            .kommentio-widget[data-theme="light"] .apple-logo-light { display: none; }\n            .kommentio-widget[data-theme="light"] .apple-bg-dark { display: block; }\n            .kommentio-widget[data-theme="light"] .apple-logo-dark { display: block; }\n          </style>\n          \x3c!-- 원형 마스크 정의 --\x3e\n          <mask id="apple-circle-mask">\n            <circle cx="28" cy="28" r="28" fill="white"/>\n          </mask>\n        </defs>\n        \x3c!-- 원형 마스크 적용된 그룹 --\x3e\n        <g mask="url(#apple-circle-mask)">\n          \x3c!-- 라이트 모드용 (흰 배경 + 검은 로고) --\x3e\n          <rect class="apple-bg-light" x="0" y="0" width="56" height="56"/>\n          <g class="apple-logo-light" transform="translate(28, 28) scale(1.2) translate(-28, -28)">\n            <path d="M28.2226562,20.3846154 C29.0546875,20.3846154 30.0976562,19.8048315 30.71875,19.0317864 C31.28125,18.3312142 31.6914062,17.352829 31.6914062,16.3744437 C31.6914062,16.2415766 31.6796875,16.1087095 31.65625,16 C30.7304687,16.0362365 29.6171875,16.640178 28.9492187,17.4494596 C28.421875,18.06548 27.9414062,19.0317864 27.9414062,20.0222505 C27.9414062,20.1671964 27.9648438,20.3121424 27.9765625,20.3604577 C28.0351562,20.3725366 28.1289062,20.3846154 28.2226562,20.3846154 Z M25.2929688,35 C26.4296875,35 26.9335938,34.214876 28.3515625,34.214876 C29.7929688,34.214876 30.109375,34.9758423 31.375,34.9758423 C32.6171875,34.9758423 33.4492188,33.792117 34.234375,32.6325493 C35.1132812,31.3038779 35.4765625,29.9993643 35.5,29.9389701 C35.4179688,29.9148125 33.0390625,28.9122695 33.0390625,26.0979021 C33.0390625,23.6579784 34.9140625,22.5588048 35.0195312,22.474253 C33.7773438,20.6382708 31.890625,20.5899555 31.375,20.5899555 C29.9804688,20.5899555 28.84375,21.4596313 28.1289062,21.4596313 C27.3554688,21.4596313 26.3359375,20.6382708 25.1289062,20.6382708 C22.8320312,20.6382708 20.5,22.5950413 20.5,26.2911634 C20.5,28.5861411 21.3671875,31.013986 22.4335938,32.5842339 C23.3476562,33.9129053 24.1445312,35 25.2929688,35 Z"/>\n          </g>\n          \x3c!-- 다크 모드용 (검은 배경 + 흰 로고) --\x3e\n          <rect class="apple-bg-dark" x="0" y="0" width="56" height="56"/>\n          <g class="apple-logo-dark" transform="translate(28, 28) scale(1.2) translate(-28, -28)">\n            <path d="M28.2226562,20.3846154 C29.0546875,20.3846154 30.0976562,19.8048315 30.71875,19.0317864 C31.28125,18.3312142 31.6914062,17.352829 31.6914062,16.3744437 C31.6914062,16.2415766 31.6796875,16.1087095 31.65625,16 C30.7304687,16.0362365 29.6171875,16.640178 28.9492187,17.4494596 C28.421875,18.06548 27.9414062,19.0317864 27.9414062,20.0222505 C27.9414062,20.1671964 27.9648438,20.3121424 27.9765625,20.3604577 C28.0351562,20.3725366 28.1289062,20.3846154 28.2226562,20.3846154 Z M25.2929688,35 C26.4296875,35 26.9335938,34.214876 28.3515625,34.214876 C29.7929688,34.214876 30.109375,34.9758423 31.375,34.9758423 C32.6171875,34.9758423 33.4492188,33.792117 34.234375,32.6325493 C35.1132812,31.3038779 35.4765625,29.9993643 35.5,29.9389701 C35.4179688,29.9148125 33.0390625,28.9122695 33.0390625,26.0979021 C33.0390625,23.6579784 34.9140625,22.5588048 35.0195312,22.474253 C33.7773438,20.6382708 31.890625,20.5899555 31.375,20.5899555 C29.9804688,20.5899555 28.84375,21.4596313 28.1289062,21.4596313 C27.3554688,21.4596313 26.3359375,20.6382708 25.1289062,20.6382708 C22.8320312,20.6382708 20.5,22.5950413 20.5,26.2911634 C20.5,28.5861411 21.3671875,31.013986 22.4335938,32.5842339 C23.3476562,33.9129053 24.1445312,35 25.2929688,35 Z"/>\n          </g>\n        </g>\n      </svg>',github:`<svg width="${n}" height="${n}" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0c4.42 0 8 3.58 8 8a8.1 8.1 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"/></svg>`,twitter:`<svg width="${n}" height="${n}" viewBox="0 0 16 16" fill="currentColor"><path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633Z"/></svg>`,facebook:`<svg width="${n}" height="${n}" viewBox="0 0 16 16" fill="currentColor"><path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/></svg>`,linkedin:`<svg width="${n}" height="${n}" viewBox="0 0 16 16" fill="currentColor"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/></svg>`,kakao:'<svg width="100%" height="100%" viewBox="0 0 56 56" fill="none">\n        <defs>\n          \x3c!-- 원형 마스크 정의 --\x3e\n          <mask id="kakao-circle-mask">\n            <circle cx="28" cy="28" r="28" fill="white"/>\n          </mask>\n        </defs>\n        \n        \x3c!-- 원형 마스크 적용된 그룹 --\x3e\n        <g mask="url(#kakao-circle-mask)">\n          \x3c!-- 카카오 브랜드 색상 배경 (커브가 들어간 사각형을 원형으로 마스킹) --\x3e\n          <path fill="#FFE812" d="M56 36c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20V20C0 8.954 8.954 0 20 0h16c11.046 0 20 8.954 20 20v16z"/>\n          \n          \x3c!-- 카카오톡 말풍선 로고 (텍스트 제거) --\x3e\n          <g transform="translate(28, 28) scale(1.3) translate(-16, -16)">\n            <path d="M16 6C9.562 6 4 10.713 4 16.5c0 3.779 2.466 7.247 6.248 9.477-0.193 0.549-1.237 3.534-1.081 3.769 0 0-0.027 0.176 0.134 0.243s0.348 0.015 0.348 0.015c0.327-0.046 4.294-2.781 4.994-3.404C15.295 26.685 15.632 26.8 16 26.8c6.438 0 12-4.712 12-10.3S22.438 6 16 6z" fill="#000"/>\n          </g>\n        </g>\n      </svg>'}[e]||""}async loadSupabase(){if(!this.options.supabaseUrl||!this.options.supabaseKey)return this.mockMode=!0,void this.initMockData();try{window.supabase||await this.loadScript("https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"),this.supabase=window.supabase.createClient(this.options.supabaseUrl,this.options.supabaseKey),await this.resolveSiteId();const{data:{user:e},error:n}=await this.supabase.auth.getUser(),t=localStorage.getItem("kommentio_custom_user");e?this.currentUser=e:t&&(this.currentUser=JSON.parse(t)),this.supabase.auth.onAuthStateChange((async(e,n)=>{var t,o,i;if("SIGNED_IN"===e&&(null==n?void 0:n.user)){this.currentUser=n.user,this.render();const e=(null==(t=n.user.app_metadata)?void 0:t.provider)||"",a=(null==(o=n.user.user_metadata)?void 0:o.name)||(null==(i=n.user.user_metadata)?void 0:i.full_name)||n.user.email;this.showNotification(`🎉 ${e?e+" ":""}로그인 완료! ${a}님 환영합니다!`),await this.loadComments()}else"SIGNED_OUT"===e?(this.currentUser=null,this.render(),this.showNotification("로그아웃되었습니다. 👋")):"TOKEN_REFRESHED"===e&&(null==n?void 0:n.user)&&(this.currentUser=n.user)})),this.mockMode=!1}catch(e){this.mockMode=!0,this.initMockData()}}loadScript(e){return new Promise(((n,t)=>{const o=document.createElement("script");o.src=e,o.onload=n,o.onerror=t,document.head.appendChild(o)}))}createContainer(){const e=document.querySelector("[data-kommentio]")||document.getElementById("kommentio");if(!e)throw new Error("Kommentio container not found. Add <div data-kommentio></div> to your page.");this.options.siteId=e.dataset.siteId||e.dataset.kommentio||window.location.hostname,this.container=e,this.container.className="kommentio-widget",this.container.setAttribute("data-theme",this.options.theme)}attachStyles(){if(document.getElementById("kommentio-styles"))return;const e=document.createElement("style");e.id="kommentio-styles",e.textContent=this.getStyles(),document.head.appendChild(e)}getStyles(){return'\n      .kommentio-widget {\n        font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n        max-width: 100%;\n        margin: 0 auto;\n        --kommentio-bg: #ffffff;\n        --kommentio-text: #1f2937;\n        --kommentio-border: #e5e7eb;\n        --kommentio-primary: #3b82f6;\n        --kommentio-secondary: #6b7280;\n        \n        /* 8px 기반 spacing 시스템 */\n        --space-1: 0.25rem; /* 4px */\n        --space-2: 0.5rem;  /* 8px */\n        --space-3: 0.75rem; /* 12px */\n        --space-4: 1rem;    /* 16px */\n        --space-6: 1.5rem;  /* 24px */\n      }\n\n      .kommentio-widget[data-theme="dark"] {\n        --kommentio-bg: #1f2937;\n        --kommentio-text: #f9fafb;\n        --kommentio-border: #374151;\n        --kommentio-primary: #60a5fa;\n        --kommentio-secondary: #9ca3af;\n      }\n\n      .kommentio-container {\n        background: var(--kommentio-bg);\n        color: var(--kommentio-text);\n        border: 1px solid var(--kommentio-border);\n        border-radius: 8px;\n        padding: 1.5rem;\n      }\n\n      .kommentio-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 1.5rem;\n        padding-bottom: 1rem;\n        border-bottom: 1px solid var(--kommentio-border);\n      }\n\n      .kommentio-title {\n        font-size: 1.25rem;\n        font-weight: 600;\n        margin: 0;\n      }\n\n      .kommentio-auth {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 0.5rem;\n        align-items: center;\n      }\n\n      /* 🎨 새로운 원형 소셜 로그인 시스템 */\n      .kommentio-social-login {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 12px;\n        margin-bottom: 1rem;\n        max-width: 100%;\n        justify-content: flex-end;\n      }\n\n      .kommentio-btn {\n        padding: 0.5rem 1rem;\n        border: 1px solid var(--kommentio-border);\n        border-radius: 6px;\n        background: var(--kommentio-bg);\n        color: var(--kommentio-text);\n        cursor: pointer;\n        font-size: 0.875rem;\n        transition: all 0.2s;\n        display: flex;\n        align-items: center;\n        gap: 0.5rem;\n        min-width: fit-content;\n      }\n\n      .kommentio-btn:hover {\n        background: var(--kommentio-border);\n        transform: translateY(-1px);\n        box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n      }\n\n      .kommentio-btn:focus {\n        outline: 2px solid var(--kommentio-primary);\n        outline-offset: 2px;\n      }\n\n      .kommentio-btn-primary {\n        background: #6366f1;\n        color: white;\n        border-color: #6366f1;\n        padding: 0.625rem 1.25rem;\n        font-size: 0.875rem;\n        font-weight: 500;\n      }\n\n      /* 🔥 프리미엄 원형 소셜 로그인 버튼 */\n      .kommentio-btn-social {\n        width: 48px;\n        height: 48px;\n        border-radius: 50%;\n        border: 1px solid;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 0;\n        position: relative;\n        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n        cursor: pointer;\n        min-width: 48px;\n        min-height: 48px;\n        max-width: 48px;\n        max-height: 48px;\n        flex-shrink: 0;\n        overflow: hidden;\n      }\n\n      /* Apple 아이콘은 전체 크기 + 원형 마스크 (Apple 가이드라인 준수) */\n      .kommentio-btn-apple svg {\n        /* 스케일링 제거 - Apple 로고가 이제 100% 크기로 원형 마스크 적용됨 */\n      }\n\n      .kommentio-btn-social:hover {\n        transform: translateY(-2px) scale(1.05);\n        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n      }\n\n      .kommentio-btn-social:active {\n        transform: translateY(0) scale(0.98);\n        transition: transform 0.1s ease;\n      }\n\n      .kommentio-btn-social:focus {\n        outline: 3px solid var(--kommentio-primary);\n        outline-offset: 2px;\n      }\n\n      /* Google 브랜딩 가이드라인 준수 */\n      .kommentio-btn-google {\n        background: #ffffff;\n        border-color: #dadce0;\n        color: #3c4043;\n      }\n\n      .kommentio-btn-google:hover {\n        background: #f8f9fa;\n        border-color: #dadce0;\n        box-shadow: 0 8px 25px rgba(60, 64, 67, 0.15);\n      }\n\n      .kommentio-btn-github {\n        background: #24292f;\n        border-color: #24292f;\n        color: #ffffff;\n      }\n\n      .kommentio-btn-github:hover {\n        background: #32383f;\n        border-color: #32383f;\n      }\n\n      .kommentio-btn-facebook {\n        background: #1877f2;\n        border-color: #1877f2;\n        color: #ffffff;\n      }\n\n      .kommentio-btn-facebook:hover {\n        background: #166fe5;\n        border-color: #166fe5;\n      }\n\n      .kommentio-btn-twitter {\n        background: #000000;\n        border-color: #000000;\n        color: #ffffff;\n      }\n\n      .kommentio-btn-twitter:hover {\n        background: #272c30;\n        border-color: #272c30;\n      }\n\n      .kommentio-btn-apple {\n        background: #000000;\n        border: none;\n        color: #ffffff;\n      }\n\n      .kommentio-btn-apple:hover {\n        background: #1d1d1f;\n        border: none;\n      }\n\n      .kommentio-btn-linkedin {\n        background: #0a66c2;\n        border-color: #0a66c2;\n        color: #ffffff;\n      }\n\n      .kommentio-btn-linkedin:hover {\n        background: #004182;\n        border-color: #004182;\n      }\n\n      .kommentio-btn-kakao {\n        background: #fee500;\n        border: none;\n        color: #000000;\n      }\n\n      .kommentio-btn-kakao:hover {\n        background: #fdd835;\n        border: none;\n      }\n\n\n      .kommentio-user-info {\n        display: flex;\n        align-items: center;\n        justify-content: flex-end;\n        gap: 0.5rem;\n        font-size: 0.875rem;\n        color: var(--kommentio-secondary);\n      }\n\n      .kommentio-logout-btn {\n        padding: 0.25rem 0.75rem;\n        font-size: 0.75rem;\n        background: transparent;\n        border: 1px solid var(--kommentio-border);\n        color: var(--kommentio-secondary);\n      }\n\n      .kommentio-form {\n        margin-bottom: var(--space-6);\n      }\n\n      /* 🎨 v0.3.1 마크다운 탭 시스템 CSS */\n      .kommentio-form-tabs {\n        display: flex;\n        border-bottom: 1px solid var(--kommentio-border);\n        margin-bottom: 0;\n        gap: 0;\n      }\n\n      .kommentio-tab {\n        background: transparent;\n        border: none;\n        padding: 0.75rem 1rem;\n        cursor: pointer;\n        font-size: 0.875rem;\n        color: var(--kommentio-secondary);\n        border-bottom: 2px solid transparent;\n        transition: all 0.2s ease;\n        display: flex;\n        align-items: center;\n        gap: 0.375rem;\n        font-weight: 500;\n      }\n\n      .kommentio-tab:hover {\n        color: var(--kommentio-text);\n        background: var(--kommentio-border);\n      }\n\n      .kommentio-tab-active {\n        color: var(--kommentio-primary);\n        border-bottom-color: var(--kommentio-primary);\n        background: var(--kommentio-bg);\n      }\n\n      .kommentio-tab-content {\n        display: none;\n        padding: 1rem 0 0 0;\n      }\n\n      .kommentio-tab-content-active {\n        display: block;\n      }\n\n      .kommentio-textarea {\n        width: 100%;\n        min-height: 120px;\n        padding: 0.75rem;\n        border: 1px solid var(--kommentio-border);\n        border-radius: 6px;\n        background: var(--kommentio-bg);\n        color: var(--kommentio-text);\n        resize: vertical;\n        font-family: inherit;\n        box-sizing: border-box;\n        border-top-left-radius: 0;\n        border-top-right-radius: 0;\n        border-top: none;\n      }\n\n      /* 미리보기 컨테이너 */\n      .kommentio-preview-container {\n        min-height: 120px;\n        padding: 0.75rem;\n        border: 1px solid var(--kommentio-border);\n        border-radius: 6px;\n        background: var(--kommentio-bg);\n        border-top-left-radius: 0;\n        border-top-right-radius: 0;\n        border-top: none;\n      }\n\n      .kommentio-preview-content {\n        color: var(--kommentio-text);\n        line-height: 1.5;\n        font-size: 0.875rem;\n        min-height: 90px;\n        padding: 0.75rem;\n        word-wrap: break-word;\n        white-space: normal;\n      }\n\n      .kommentio-preview-content:empty::before {\n        content: "미리보기를 보려면 댓글을 입력하세요...";\n        color: var(--kommentio-secondary);\n        font-style: italic;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        min-height: 90px;\n      }\n\n      /* 폼 하단 영역 */\n      .kommentio-form-footer {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-top: 0.75rem;\n        gap: 1rem;\n      }\n\n      .kommentio-markdown-help {\n        flex: 1;\n        color: var(--kommentio-secondary);\n      }\n\n      .kommentio-markdown-help code {\n        background: var(--kommentio-border);\n        padding: 0.125rem 0.25rem;\n        border-radius: 3px;\n        font-size: 0.75rem;\n      }\n\n      .kommentio-comments {\n        space-y: 1rem;\n      }\n\n      .kommentio-comment {\n        border: 1px solid var(--kommentio-border);\n        border-radius: 6px;\n        padding: var(--space-4);\n        margin-bottom: var(--space-4);\n      }\n\n      .kommentio-comment-nested {\n        margin-left: 2rem;\n        margin-top: var(--space-4);\n      }\n\n      .kommentio-comment-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 0.5rem;\n      }\n\n      .kommentio-author {\n        font-weight: 600;\n        color: var(--kommentio-primary);\n        font-size: 0.9375rem;\n        margin-bottom: 0.25rem;\n      }\n\n      .kommentio-timestamp {\n        color: var(--kommentio-secondary);\n        font-size: 0.75rem;\n        margin-bottom: 0.5rem;\n      }\n\n      .kommentio-content {\n        line-height: 1.5;\n        margin-bottom: 0.75rem;\n        font-size: 0.875rem;\n        color: var(--kommentio-text);\n      }\n\n      /* 🎨 v0.3.1 마크다운 지원 CSS */\n      .kommentio-content .kommentio-bold,\n      .kommentio-preview-content .kommentio-bold {\n        font-weight: 600;\n        color: var(--kommentio-text);\n      }\n\n      .kommentio-content .kommentio-italic,\n      .kommentio-preview-content .kommentio-italic {\n        font-style: italic;\n        color: var(--kommentio-secondary);\n      }\n\n      .kommentio-content .kommentio-inline-code,\n      .kommentio-preview-content .kommentio-inline-code {\n        background: var(--kommentio-border);\n        color: var(--kommentio-primary);\n        padding: 0.125rem 0.25rem;\n        border-radius: 3px;\n        font-family: \'SF Mono\', Monaco, \'Cascadia Code\', \'Roboto Mono\', Consolas, \'Courier New\', monospace;\n        font-size: 0.8125rem;\n        font-weight: 500;\n      }\n\n      .kommentio-content .kommentio-code-block,\n      .kommentio-preview-content .kommentio-code-block {\n        background: var(--kommentio-border);\n        border: 1px solid var(--kommentio-border);\n        border-radius: 6px;\n        padding: 0.75rem;\n        margin: 0.5rem 0;\n        overflow-x: auto;\n        max-width: 100%;\n        position: relative;\n      }\n\n      .kommentio-content .kommentio-code-block code,\n      .kommentio-preview-content .kommentio-code-block code {\n        font-family: \'SF Mono\', Monaco, \'Cascadia Code\', \'Roboto Mono\', Consolas, \'Courier New\', monospace;\n        font-size: 0.8125rem;\n        line-height: 1.4;\n        color: var(--kommentio-primary);\n        white-space: pre;\n        display: block;\n        word-wrap: normal;\n        word-break: normal;\n      }\n\n      .kommentio-content .kommentio-link,\n      .kommentio-preview-content .kommentio-link {\n        color: var(--kommentio-primary);\n        text-decoration: underline;\n        text-decoration-thickness: 1px;\n        text-underline-offset: 2px;\n        transition: all 0.2s ease;\n      }\n\n      .kommentio-content .kommentio-link:hover,\n      .kommentio-preview-content .kommentio-link:hover {\n        color: var(--kommentio-primary);\n        text-decoration-thickness: 2px;\n        opacity: 0.8;\n      }\n\n      .kommentio-content .kommentio-quote,\n      .kommentio-preview-content .kommentio-quote {\n        margin: 0.5rem 0;\n        padding: 0.5rem 0.75rem;\n        border-left: 3px solid var(--kommentio-primary);\n        background: var(--kommentio-bg);\n        border-radius: 0 4px 4px 0;\n        font-style: italic;\n        color: var(--kommentio-secondary);\n        opacity: 0.9;\n      }\n\n      /* 다크 모드에서 마크다운 요소 최적화 */\n      .kommentio-widget[data-theme="dark"] .kommentio-content .kommentio-inline-code,\n      .kommentio-widget[data-theme="dark"] .kommentio-preview-content .kommentio-inline-code {\n        background: var(--kommentio-border);\n        color: var(--kommentio-primary);\n      }\n\n      .kommentio-widget[data-theme="dark"] .kommentio-content .kommentio-code-block,\n      .kommentio-widget[data-theme="dark"] .kommentio-preview-content .kommentio-code-block {\n        background: rgba(255, 255, 255, 0.05);\n        border-color: rgba(255, 255, 255, 0.1);\n      }\n\n      .kommentio-widget[data-theme="dark"] .kommentio-content .kommentio-code-block code,\n      .kommentio-widget[data-theme="dark"] .kommentio-preview-content .kommentio-code-block code {\n        color: var(--kommentio-primary);\n      }\n\n      .kommentio-widget[data-theme="dark"] .kommentio-content .kommentio-quote,\n      .kommentio-widget[data-theme="dark"] .kommentio-preview-content .kommentio-quote {\n        background: rgba(255, 255, 255, 0.02);\n        border-left-color: var(--kommentio-primary);\n      }\n\n      .kommentio-actions {\n        display: flex;\n        gap: 1rem;\n        font-size: 0.875rem;\n      }\n\n      .kommentio-action {\n        color: var(--kommentio-secondary);\n        cursor: pointer;\n        transition: color 0.2s;\n      }\n\n      .kommentio-action:hover {\n        color: var(--kommentio-primary);\n      }\n\n      .kommentio-loading {\n        text-align: center;\n        padding: 2rem;\n        color: var(--kommentio-secondary);\n      }\n\n      .kommentio-error {\n        background: #fef2f2;\n        color: #dc2626;\n        padding: 1rem;\n        border-radius: 6px;\n        margin-bottom: 1rem;\n      }\n\n      /* 반응형 디자인 - Desktop First 접근법 */\n      \n      /* 태블릿 최적화 (1024px 이하) */\n      @media (max-width: 1024px) {\n        .kommentio-header {\n          flex-direction: column;\n          gap: 1rem;\n          align-items: stretch;\n        }\n        \n        /* 태블릿에서 소셜 로그인 최적화 */\n        .kommentio-social-login {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 16px;\n          justify-content: flex-end;\n          max-width: 100%;\n        }\n        \n        .kommentio-btn-social {\n          width: 56px;\n          height: 56px;\n          min-width: 56px;\n          min-height: 56px;\n          max-width: 56px;\n          max-height: 56px;\n          flex-shrink: 0;\n        }\n        \n        /* 태블릿에서 Apple 아이콘 (원형 마스크 적용으로 스케일링 불필요) */\n        .kommentio-btn-apple svg {\n          /* 스케일링 제거 - 100% 크기 + 원형 마스크로 처리 */\n        }\n        \n        .kommentio-textarea {\n          min-height: 100px;\n        }\n      }\n      \n      /* 모바일 최적화 (768px 이하) */\n      @media (max-width: 768px) {\n        .kommentio-container {\n          padding: var(--space-4);\n          border-radius: 8px;\n          margin: var(--space-2);\n        }\n        \n        .kommentio-title {\n          font-size: 1.125rem;\n          margin-bottom: var(--space-4);\n        }\n        \n        .kommentio-widget {\n          font-size: 16px; /* iOS 줌 방지 */\n        }\n        \n        .kommentio-textarea {\n          font-size: 16px; /* iOS 줌 방지 */\n          min-height: 120px;\n          padding: 12px;\n        }\n        \n        /* 모바일에서 도움말 텍스트 숨김 */\n        .kommentio-helper-text {\n          display: none;\n        }\n        \n        /* 모바일에서 댓글 작성 버튼 스타일 완화 */\n        .kommentio-btn-primary {\n          background: #6366f1;\n          padding: 0.5rem 1rem;\n          font-size: 0.8125rem;\n          border-radius: 6px;\n          font-weight: 500;\n        }\n        \n        .kommentio-comment-nested {\n          margin-left: 1rem; /* 모바일에서 중첩 간격 줄임 */\n        }\n        \n        .kommentio-comment-nested .kommentio-comment-nested {\n          margin-left: 0.5rem; /* 3단계 중첩 더 줄임 */\n        }\n        \n        .kommentio-author {\n          font-size: 0.875rem;\n          margin-bottom: 0.25rem;\n        }\n        \n        .kommentio-timestamp {\n          font-size: 0.75rem;\n          margin-bottom: 0.5rem;\n        }\n        \n        .kommentio-content {\n          font-size: 0.875rem;\n          line-height: 1.5;\n        }\n        \n        .kommentio-comment-header {\n          margin-bottom: 0.5rem;\n        }\n        \n        .kommentio-actions {\n          flex-wrap: wrap;\n          gap: 0.5rem;\n        }\n        \n        .kommentio-btn-action {\n          min-height: 44px;\n          min-width: 44px;\n          padding: 8px 12px;\n          display: inline-flex;\n          align-items: center;\n          justify-content: center;\n        }\n        \n        .kommentio-notification {\n          left: 10px !important;\n          right: 10px !important;\n          top: 10px !important;\n          width: auto !important;\n          font-size: 0.875rem;\n        }\n      }\n      \n      /* 소형 모바일 (640px 이하) */\n      @media (max-width: 640px) {\n        .kommentio-container {\n          padding: 0.75rem;\n          margin: 0.25rem;\n        }\n        \n        /* 모바일에서 소셜 로그인 4열 그리드 */\n        .kommentio-social-login {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 12px;\n          justify-content: flex-end;\n          max-width: 100%;\n          margin: 0 auto var(--space-4) auto;\n        }\n        \n        .kommentio-btn-social {\n          width: 48px;\n          height: 48px;\n          min-width: 48px;\n          min-height: 48px;\n          max-width: 48px;\n          max-height: 48px;\n          flex-shrink: 0;\n        }\n        \n        /* 모바일에서 Apple 아이콘 (원형 마스크 적용으로 스케일링 불필요) */\n        .kommentio-btn-apple svg {\n          /* 스케일링 제거 - 100% 크기 + 원형 마스크로 처리 */\n        }\n        \n        .kommentio-comment {\n          border-left: none;\n          border-right: none;\n          border-radius: 0;\n          margin-left: -0.75rem;\n          margin-right: -0.75rem;\n          padding-left: 0.75rem;\n          padding-right: 0.75rem;\n        }\n        \n        /* 640px에서 답글 계층 구조 유지 */\n        .kommentio-comment-nested {\n          margin-left: 0.75rem;\n        }\n        \n        .kommentio-comment-nested .kommentio-comment-nested {\n          margin-left: 0.5rem;\n        }\n        \n        .kommentio-comment-header {\n          flex-direction: column;\n          align-items: flex-start;\n          gap: 0.25rem;\n        }\n        \n        .kommentio-form {\n          padding: 0.75rem;\n        }\n        \n        .kommentio-form-actions {\n          flex-direction: column;\n          gap: 0.5rem;\n        }\n        \n        .kommentio-btn {\n          width: 100%;\n          min-height: 44px;\n          justify-content: center;\n        }\n\n        /* v0.3.1 모바일 탭 시스템 최적화 */\n        .kommentio-form-tabs {\n          border-bottom: 1px solid var(--kommentio-border);\n        }\n\n        .kommentio-tab {\n          padding: 0.625rem 0.75rem;\n          font-size: 0.8125rem;\n          min-height: 44px;\n          gap: 0.25rem;\n        }\n\n        .kommentio-textarea {\n          font-size: 16px; /* iOS 줌 방지 */\n          min-height: 100px;\n          padding: 12px;\n        }\n\n        .kommentio-preview-container {\n          min-height: 100px;\n          padding: 12px;\n          font-size: 16px;\n        }\n\n        .kommentio-preview-content {\n          min-height: 76px;\n          font-size: 0.8125rem;\n          padding: 0.5rem;\n        }\n\n        .kommentio-form-footer {\n          flex-direction: column;\n          gap: 0.75rem;\n          align-items: stretch;\n        }\n\n        .kommentio-markdown-help {\n          text-align: center;\n          font-size: 0.75rem;\n        }\n\n        .kommentio-markdown-help code {\n          font-size: 0.6875rem;\n        }\n      }\n      \n      /* 초소형 모바일 (480px 이하) */\n      @media (max-width: 480px) {\n        .kommentio-title {\n          font-size: 1rem;\n        }\n        \n        .kommentio-comment-nested {\n          margin-left: 0.5rem;\n        }\n        \n        .kommentio-comment-nested .kommentio-comment-nested {\n          margin-left: 0.25rem;\n        }\n        \n        .kommentio-author {\n          font-size: 0.8125rem;\n        }\n        \n        .kommentio-timestamp {\n          font-size: 0.6875rem;\n        }\n        \n        .kommentio-textarea {\n          min-height: 100px;\n          padding: 10px;\n        }\n      }\n      \n      /* 극소형 모바일 (360px 이하) - 소셜 로그인 2줄 4+3 레이아웃 */\n      @media (max-width: 360px) {\n        .kommentio-container {\n          padding: 0.5rem;\n          margin: 0.125rem;\n        }\n        \n        .kommentio-social-login {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 8px;\n          max-width: 100%;\n          margin: 0 auto var(--space-4) auto;\n          justify-content: flex-end;\n        }\n        \n        .kommentio-btn-social {\n          width: 44px;\n          height: 44px;\n          min-width: 44px;\n          min-height: 44px;\n          max-width: 44px;\n          max-height: 44px;\n          flex-shrink: 0;\n        }\n        \n        \n        .kommentio-title {\n          font-size: 0.875rem;\n        }\n        \n        /* 360px에서 답글 계층 구조 유지 */\n        .kommentio-comment-nested {\n          margin-left: 0.5rem;\n        }\n        \n        .kommentio-comment-nested .kommentio-comment-nested {\n          margin-left: 0.25rem;\n        }\n\n        /* 모바일에서 코드 블록 최적화 */\n        .kommentio-content .kommentio-code-block {\n          padding: 0.5rem;\n          margin: 0.25rem 0;\n          border-radius: 4px;\n        }\n\n        .kommentio-content .kommentio-code-block code {\n          font-size: 0.75rem;\n          line-height: 1.3;\n        }\n      }\n      \n      /* 최소형 모바일 (320px 이하) - 소셜 로그인 2줄 4+3 레이아웃 최적화 */\n      @media (max-width: 320px) {\n        .kommentio-container {\n          padding: 0.25rem;\n          margin: 0;\n          max-width: calc(100vw - 1rem);\n        }\n        \n        .kommentio-social-login {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 4px;\n          max-width: 280px;\n          margin: 0 auto 0.75rem auto;\n          justify-content: flex-end;\n        }\n        \n        .kommentio-btn-social {\n          width: 40px;\n          height: 40px;\n          min-width: 40px;\n          min-height: 40px;\n          max-width: 40px;\n          max-height: 40px;\n          flex-shrink: 0;\n        }\n        \n        \n        .kommentio-title {\n          font-size: 0.75rem;\n          margin-bottom: 0.75rem;\n        }\n        \n        .kommentio-textarea {\n          min-height: 80px;\n          padding: 8px;\n          font-size: 14px;\n        }\n        \n        /* 320px에서 답글 계층 구조 유지 */\n        .kommentio-comment-nested {\n          margin-left: 0.5rem;\n        }\n        \n        .kommentio-comment-nested .kommentio-comment-nested {\n          margin-left: 0.25rem;\n        }\n      }\n      \n      /* 터치 친화적 인터페이스 */\n      @media (hover: none) and (pointer: coarse) {\n        .kommentio-btn:hover {\n          transform: none; /* 터치 디바이스에서 호버 효과 제거 */\n        }\n        \n        .kommentio-btn:active {\n          transform: scale(0.98);\n          transition: transform 0.1s ease;\n        }\n        \n        /* 소셜 버튼 터치 최적화 */\n        .kommentio-btn-social:hover {\n          transform: none;\n          box-shadow: none;\n        }\n        \n        .kommentio-btn-social:active {\n          transform: scale(0.95);\n          transition: transform 0.1s ease;\n        }\n        \n        .kommentio-comment-actions button:hover {\n          background: transparent;\n        }\n        \n        .kommentio-comment-actions button:active {\n          background: var(--kommentio-bg-secondary);\n          border-radius: 4px;\n        }\n      }\n      \n      /* 가로 모드 최적화 */\n      @media (max-height: 500px) and (orientation: landscape) {\n        .kommentio-container {\n          padding: 0.5rem;\n        }\n        \n        .kommentio-textarea {\n          min-height: 80px;\n        }\n        \n        .kommentio-title {\n          font-size: 1rem;\n          margin-bottom: 0.5rem;\n        }\n      }\n    '}render(){this.container&&(this.container.innerHTML=`\n      <div class="kommentio-container">\n        <header class="kommentio-header">\n          <h3 class="kommentio-title">${this.t("comment.title")}</h3>\n          <div class="kommentio-auth">\n            ${this.renderAuthButtons()}\n          </div>\n        </header>\n        \n        ${this.renderCommentForm()}\n        \n        <div class="kommentio-comments" id="kommentio-comments">\n          <div class="kommentio-loading">댓글을 불러오는 중...</div>\n        </div>\n      </div>\n    `,this.loadComments())}renderAuthButtons(){var e;if(this.currentUser)return`\n        <div class="kommentio-user-info">\n          <span>${this.t("auth.user")}: ${(null==(e=this.currentUser.user_metadata)?void 0:e.name)||this.currentUser.email}</span>\n          <button class="kommentio-btn kommentio-logout-btn" onclick="kommentio.logout()">${this.t("auth.signOut")}</button>\n        </div>\n      `;const n=Object.entries(this.options.socialProviders).filter((([,e])=>e.enabled));if(0===n.length)return`<p class="kommentio-text-secondary">${this.t("auth.noProvidersConfigured")||"No login options configured."}</p>`;return`\n      <div class="kommentio-social-login">\n        ${n.map((([e,n],t)=>{const o=this.t(`auth.providers.${e}`)||n.label,i=this.t("auth.loginWith",{provider:o});return`\n        <button \n          class="kommentio-btn kommentio-btn-social kommentio-btn-${e}" \n          onclick="kommentio.login('${e}')"\n          title="${i}"\n          aria-label="${i}"\n          tabindex="${0===t?"0":"-1"}"\n          role="button"\n        >\n          ${this.getSocialProviderIcon(e,24)}\n        </button>\n      `})).join("")}\n      </div>\n    `}updateSocialProviders(e){Object.assign(this.options.socialProviders,e),this.render()}toggleSocialProvider(e,n){this.options.socialProviders[e]&&(this.options.socialProviders[e].enabled=n,this.render())}renderCommentForm(){return this.currentUser||this.options.allowAnonymous?`\n      <form class="kommentio-form" onsubmit="kommentio.handleSubmit(event)">\n        \x3c!-- 탭 네비게이션 --\x3e\n        <div class="kommentio-form-tabs">\n          <button type="button" class="kommentio-tab kommentio-tab-active" data-tab="write" onclick="kommentio.switchTab(event, 'write')">\n            ${this.t("tabs.write")}\n          </button>\n          <button type="button" class="kommentio-tab" data-tab="preview" onclick="kommentio.switchTab(event, 'preview')">\n            ${this.t("tabs.preview")}\n          </button>\n        </div>\n\n        \x3c!-- 작성 탭 --\x3e\n        <div class="kommentio-tab-content kommentio-tab-write kommentio-tab-content-active">\n          <textarea \n            class="kommentio-textarea" \n            placeholder="${this.t("placeholder.markdown")}"\n            oninput="kommentio.updatePreview(this.value)"\n            onkeydown="kommentio.handleKeydown(event)"\n            required\n          ></textarea>\n        </div>\n\n        \x3c!-- 미리보기 탭 --\x3e\n        <div class="kommentio-tab-content kommentio-tab-preview">\n          <div class="kommentio-preview-container">\n            <div class="kommentio-preview-content">\n${this.t("comment.writeComment")}\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- 하단 컨트롤 --\x3e\n        <div class="kommentio-form-footer">\n          <div class="kommentio-markdown-help">\n            <small class="kommentio-text-secondary">\n              <span style="opacity: 0.8;">${this.t("keyboard.shortcuts")||"Ctrl+Enter: Post"}</span>\n            </small>\n          </div>\n          <button type="submit" class="kommentio-btn kommentio-btn-primary">${this.t("comment.submitComment")}</button>\n        </div>\n      </form>\n    `:`<p class="kommentio-text-secondary">${this.t("auth.loginRequired")}</p>`}async resolveSiteId(){try{const e=this.options.siteId,{data:n,error:t}=await this.supabase.from("sites").select("id").eq("name",e).eq("is_active",!0).single();if(n&&!t)return void(this.siteUUID=n.id);const{data:o,error:i}=await this.supabase.from("sites").insert([{name:e,domain:window.location.hostname,description:`Auto-created site for ${e}`,owner_id:null,settings:{allow_anonymous:!0,moderation_enabled:!1,max_comment_length:2e3,theme:this.options.theme,language:this.options.language}}]).select("id").single();this.siteUUID=o&&!i?o.id:e}catch(e){this.siteUUID=this.options.siteId}}initMockData(){const e=this.t("demo.comments")||[],n=this.t("demo.author")||"Xavier";this.mockComments=[{id:"mock-1",site_id:this.siteUUID||this.options.siteId,page_url:window.location.pathname,content:e[0]||"Welcome! Kommentio is a comment widget system that supports 8 social logins and AI spam filtering!",parent_id:null,depth:0,author_name:n,author_email:"xavier@kommentio.tech",likes_count:12,created_at:new Date(Date.now()-108e5).toISOString(),children:[]},{id:"mock-2",site_id:this.siteUUID||this.options.siteId,page_url:window.location.pathname,content:e[1]||"It also supports **some** *markdown* syntax.",parent_id:null,depth:0,author_name:n,author_email:"xavier@kommentio.tech",likes_count:8,created_at:new Date(Date.now()-72e5).toISOString(),children:[]},{id:"mock-2-1",site_id:this.siteUUID||this.options.siteId,page_url:window.location.pathname,content:e[2]||"Try making text **bold** or *italic*. You can also create quotes.",parent_id:"mock-2",depth:1,author_name:n,author_email:"xavier@kommentio.tech",likes_count:5,created_at:new Date(Date.now()-66e5).toISOString(),children:[]},{id:"mock-2-2",site_id:this.siteUUID||this.options.siteId,page_url:window.location.pathname,content:e[3]||"Experience `inline code` and ```code snippet blocks``` designed for tech bloggers!",parent_id:"mock-2",depth:1,author_name:n,author_email:"xavier@kommentio.tech",likes_count:7,created_at:new Date(Date.now()-63e5).toISOString(),children:[]},{id:"mock-3",site_id:this.siteUUID||this.options.siteId,page_url:window.location.pathname,content:e[4]||"As Leonardo da Vinci said:\n> Simplicity is the ultimate sophistication.",parent_id:null,depth:0,author_name:n,author_email:"xavier@kommentio.tech",likes_count:15,created_at:new Date(Date.now()-36e5).toISOString(),children:[]},{id:"mock-3-1",site_id:this.siteUUID||this.options.siteId,page_url:window.location.pathname,content:e[5]||"This is the development motto of Kommentio.",parent_id:"mock-3",depth:1,author_name:n,author_email:"xavier@kommentio.tech",likes_count:6,created_at:new Date(Date.now()-33e5).toISOString(),children:[]},{id:"mock-4",site_id:this.siteUUID||this.options.siteId,page_url:window.location.pathname,content:e[6]||"For more details, check out my [Github page](https://github.com/xavierchoi/kommentio)!",parent_id:null,depth:0,author_name:n,author_email:"xavier@kommentio.tech",likes_count:18,created_at:new Date(Date.now()-18e5).toISOString(),children:[]},{id:"mock-4-1",site_id:this.siteUUID||this.options.siteId,page_url:window.location.pathname,content:e[7]||"Oh, and don't forget to read the **Readme file**.",parent_id:"mock-4",depth:1,author_name:n,author_email:"xavier@kommentio.tech",likes_count:4,created_at:new Date(Date.now()-15e5).toISOString(),children:[]},{id:"mock-4-1-1",site_id:this.siteUUID||this.options.siteId,page_url:window.location.pathname,content:e[8]||"Finally, **Kommentio** is a completely **open source project**.",parent_id:"mock-4-1",depth:2,author_name:n,author_email:"xavier@kommentio.tech",likes_count:9,created_at:new Date(Date.now()-12e5).toISOString(),children:[]},{id:"mock-4-1-1-1",site_id:this.siteUUID||this.options.siteId,page_url:window.location.pathname,content:e[9]||"*Really finally*, please note that it's **free** and **ad-free**! The supported reply hierarchy ends *here*.",parent_id:"mock-4-1-1",depth:3,author_name:n,author_email:"xavier@kommentio.tech",likes_count:25,created_at:new Date(Date.now()-9e5).toISOString(),children:[]}]}async loadComments(){if(this.mockMode)return this.comments=this.buildCommentTree(this.mockComments),void this.renderComments();try{const{data:e,error:n}=await this.supabase.from("comments").select("*").eq("site_id",this.siteUUID||this.options.siteId).eq("page_url",window.location.pathname).eq("is_deleted",!1).order("created_at",{ascending:!0});if(n)throw n;this.comments=this.buildCommentTree(e||[]),this.renderComments()}catch(e){this.renderError(this.t("messages.error.loadFailed"))}}buildCommentTree(e){const n={},t=[];return e.forEach((e=>{e.children=[],n[e.id]=e})),e.forEach((e=>{e.parent_id&&n[e.parent_id]?n[e.parent_id].children.push(e):t.push(e)})),t}renderComments(){const e=document.getElementById("kommentio-comments");e&&(0!==this.comments.length?e.innerHTML=this.comments.map((e=>this.renderComment(e))).join(""):e.innerHTML=`<p class="kommentio-text-secondary">${this.t("comment.writeComment").replace("...","!")}</p>`)}renderComment(e,n=0){const t=n>0,o=n<this.options.maxDepth;return`\n      <div class="kommentio-comment ${t?"kommentio-comment-nested":""}" data-comment-id="${e.id}">\n        <div class="kommentio-comment-header">\n          <span class="kommentio-author">${e.author_name||"익명"}</span>\n          <span class="kommentio-timestamp">${this.formatDate(e.created_at)}</span>\n        </div>\n        \n        <div class="kommentio-content">${this.sanitizeContent(e.content)}</div>\n        \n        <div class="kommentio-actions">\n          <span class="kommentio-action" onclick="kommentio.likeComment('${e.id}')">\n            👍&nbsp;${e.likes||0}\n          </span>\n          ${o?`<span class="kommentio-action" onclick="kommentio.replyTo('${e.id}')">${this.t("comment.reply")}</span>`:""}\n        </div>\n        \n        ${e.children.map((e=>this.renderComment(e,n+1))).join("")}\n      </div>\n    `}formatDate(e){const n=new Date(e),t=new Date-n;return t<6e4?"방금 전":t<36e5?`${Math.floor(t/6e4)}분 전`:t<864e5?`${Math.floor(t/36e5)}시간 전`:n.toLocaleDateString("ko-KR")}parseMarkdown(e){let n=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return n=n.replace(/```([^`]*(?:`(?!``)[^`]*)*)```/gs,((e,n)=>`<pre class="kommentio-code-block"><code>${n.trim()}</code></pre>`)),n=n.replace(/`([^`]+)`/g,'<code class="kommentio-inline-code">$1</code>'),n=n.replace(/\*\*([^*]+)\*\*/g,'<strong class="kommentio-bold">$1</strong>'),n=n.replace(/\*([^*]+)\*/g,'<em class="kommentio-italic">$1</em>'),n=n.replace(/\[([^\]]+)\]\(([^)]+)\)/g,((e,n,t)=>/^https?:\/\//.test(t)?`<a href="${t}" class="kommentio-link" target="_blank" rel="noopener noreferrer">${n}</a>`:e)),n=n.split("\n").map((e=>{if(e.trim().startsWith("&gt; ")){return`<blockquote class="kommentio-quote">${e.replace(/^&gt; /,"")}</blockquote>`}return e})).join("\n"),n=n.replace(/\n/g,"<br>"),n}sanitizeContent(e){return this.parseMarkdown(e)}renderError(e){const n=document.getElementById("kommentio-comments");n&&(n.innerHTML=`<div class="kommentio-error">${e}</div>`)}attachEventListeners(){this.container.addEventListener("keydown",(e=>{if("Tab"===e.key&&this.handleTabNavigation(e),"Enter"!==e.key&&" "!==e.key||!e.target.classList.contains("kommentio-btn-social")||(e.preventDefault(),e.target.click()),(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&e.target.classList.contains("kommentio-textarea")){e.preventDefault();const n=e.target.closest("form");n&&n.dispatchEvent(new Event("submit",{bubbles:!0}))}"Escape"===e.key&&e.target.blur()})),this.mockMode?this.simulateRealtimeUpdates():this.supabase&&this.setupRealtimeSubscription()}handleTabNavigation(e){const n=this.container.querySelectorAll(".kommentio-btn-social"),t=Array.from(n).indexOf(e.target);0!==n.length&&(e.shiftKey?0===t&&(e.preventDefault(),n[n.length-1].focus()):t===n.length-1&&(e.preventDefault(),n[0].focus()))}simulateRealtimeUpdates(){setInterval((()=>{if(Math.random()>.7){const e=["실시간 업데이트 테스트입니다! 👋","Mock 모드에서도 실시간 기능이 잘 동작하네요!","새로운 댓글이 자동으로 추가되었습니다.","Kommentio 실시간 업데이트 데모 중...","이 댓글은 30초마다 자동으로 생성됩니다."],n=["실시간테스터","자동댓글봇","Mock사용자","데모계정"],t={id:"mock-realtime-"+Date.now(),site_id:this.siteUUID||this.options.siteId,page_url:window.location.pathname,content:e[Math.floor(Math.random()*e.length)],parent_id:null,depth:0,author_name:n[Math.floor(Math.random()*n.length)],author_email:"realtime@example.com",likes_count:Math.floor(5*Math.random()),created_at:(new Date).toISOString(),children:[]};this.mockComments.push(t),this.comments=this.buildCommentTree(this.mockComments),this.renderComments(),this.showNotification("새 댓글이 추가되었습니다! 🔄")}}),3e4)}showNotification(e){const n=document.createElement("div");if(n.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: #3b82f6;\n      color: white;\n      padding: 12px 16px;\n      border-radius: 6px;\n      font-size: 14px;\n      z-index: 1000;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n      animation: slideIn 0.3s ease-out;\n    ",n.textContent=e,document.body.appendChild(n),!document.getElementById("kommentio-notification-styles")){const e=document.createElement("style");e.id="kommentio-notification-styles",e.textContent="\n        @keyframes slideIn {\n          from {\n            transform: translateX(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n      ",document.head.appendChild(e)}setTimeout((()=>{n.style.opacity="0",n.style.transform="translateX(100%)",setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n)}),300)}),3e3)}setupRealtimeSubscription(){try{const e=`comments-${this.siteUUID||this.options.siteId}`;this.realtimeChannel=this.supabase.channel(e).on("postgres_changes",{event:"*",schema:"public",table:"comments",filter:`site_id=eq.${this.siteUUID||this.options.siteId}`},(e=>{this.handleRealtimeCommentEvent(e)})).on("postgres_changes",{event:"*",schema:"public",table:"comment_likes",filter:`comment_id=in.(${this.getAllCommentIds().join(",")})`},(e=>{this.handleRealtimeLikeEvent(e)})).subscribe((e=>{"SUBSCRIBED"===e?this.showNotification("🔄 실시간 업데이트가 활성화되었습니다!"):"CHANNEL_ERROR"===e&&this.showNotification("⚠️ 실시간 업데이트 연결에 문제가 있습니다.")}))}catch(e){}}handleRealtimeCommentEvent(e){const{eventType:n,new:t,old:o}=e;switch(n){case"INSERT":t&&t.site_id===(this.siteUUID||this.options.siteId)&&(this.showNotification(`💬 새 댓글: ${t.author_name}`),this.loadComments());break;case"UPDATE":t&&t.site_id===(this.siteUUID||this.options.siteId)&&(!1===o.is_deleted&&!0===t.is_deleted?this.showNotification("🗑️ 댓글이 삭제되었습니다."):this.showNotification("✏️ 댓글이 수정되었습니다."),this.loadComments());break;case"DELETE":this.showNotification("🗑️ 댓글이 삭제되었습니다."),this.loadComments()}}handleRealtimeLikeEvent(e){const{eventType:n,new:t}=e;"INSERT"===n&&t?(this.showNotification("❤️ 새로운 좋아요!"),this.updateCommentLikeCount(t.comment_id)):"DELETE"===n&&this.updateCommentLikeCount(e.old.comment_id)}getAllCommentIds(){const e=n=>{let t=[];for(const o of n)t.push(o.id),o.children&&o.children.length>0&&(t=t.concat(e(o.children)));return t};return this.comments?e(this.comments):[]}async updateCommentLikeCount(e){try{const{data:n,error:t}=await this.supabase.from("comments").select("likes_count").eq("id",e).single();if(t)throw t;const o=this.container.querySelector(`[onclick*="likeComment('${e}')"]`);o&&(o.innerHTML=`👍&nbsp;${n.likes_count||0}`)}catch(n){}}unsubscribeRealtime(){this.realtimeChannel&&(this.supabase.removeChannel(this.realtimeChannel),this.realtimeChannel=null)}async handleSubmit(e){e.preventDefault();const n=e.target.querySelector("textarea"),t=n.value.trim();if(!t)return;const o=e.target.querySelector('button[type="submit"]'),i=o.textContent;o.disabled=!0,o.textContent=this.t("comment.submitting");try{const e=await this.createComment(t);n.value="",await this.loadComments(),e&&e.isSpam?this.showNotification(this.t("messages.spam.detected")):this.showNotification(this.t("messages.success.commentCreated"))}catch(a){this.showNotification(this.t("messages.error.commentFailed"))}finally{o.disabled=!1,o.textContent=i,n.focus()}}async checkSpamWithClaude(e){if(!this.options.claudeApiKey)return{spam_score:0,reason:"Claude API key not provided",is_spam:!1};try{const n=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.options.claudeApiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:"claude-3-haiku-20240307",max_tokens:100,messages:[{role:"user",content:`다음 댓글이 스팸인지 분석해주세요. 0.0(정상)에서 1.0(스팸) 사이의 점수와 간단한 이유를 JSON 형태로 응답해주세요:\n\n댓글: "${e}"\n\n응답 형식:\n{\n  "spam_score": 0.8,\n  "reason": "상업적 링크 포함"\n}`}]})});if(!n.ok)throw new Error(`Claude API 호출 실패: ${n.status}`);const t=await n.json(),o=JSON.parse(t.content[0].text);return{spam_score:o.spam_score,reason:o.reason,is_spam:o.spam_score>.7}}catch(n){return{spam_score:0,reason:"API 호출 실패",is_spam:!1}}}async createComment(e,n=null){var t,o,i,a,r,s,m,c,l;if(this.mockMode){const r=Math.random()>.9,s={id:"mock-"+Date.now(),site_id:this.siteUUID||this.options.siteId,page_url:window.location.pathname,content:e,parent_id:n,depth:n?1:0,author_name:(null==(o=null==(t=this.currentUser)?void 0:t.user_metadata)?void 0:o.name)||(null==(i=this.currentUser)?void 0:i.email)||"익명",author_email:(null==(a=this.currentUser)?void 0:a.email)||null,likes_count:0,spam_score:r?.8:.1,spam_reason:r?"Mock 스팸 감지":null,is_spam:r,created_at:(new Date).toISOString(),children:[]};return this.mockComments.push(s),this.comments=this.buildCommentTree(this.mockComments),this.renderComments(),{isSpam:r}}let d={spam_score:0,reason:null,is_spam:!1};if(this.options.claudeApiKey)try{d=await this.checkSpamWithClaude(e)}catch(p){}const{error:u}=await this.supabase.from("comments").insert({site_id:this.siteUUID||this.options.siteId,page_url:window.location.pathname,content:e,parent_id:n,author_id:null==(r=this.currentUser)?void 0:r.id,author_name:(null==(m=null==(s=this.currentUser)?void 0:s.user_metadata)?void 0:m.name)||(null==(c=this.currentUser)?void 0:c.email)||"익명",author_email:null==(l=this.currentUser)?void 0:l.email,spam_score:d.spam_score,spam_reason:d.reason,is_spam:d.is_spam,is_approved:!d.is_spam});if(u)throw u;return{isSpam:d.is_spam}}getSupabaseProvider(e){return{google:"google",github:"github",facebook:"facebook",twitter:"twitter",apple:"apple",linkedin:"linkedin_oidc",kakao:"kakao"}[e]||e}getProviderOptions(e){const n={redirectTo:window.location.href.split("#")[0]};switch(e){case"apple":return{...n,scopes:"name email"};case"linkedin":return{...n,scopes:"openid profile email"};case"kakao":return{...n,scopes:"profile_nickname profile_image account_email"};default:return n}}async login(e){var n,t;const o=this.options.socialProviders[e];if(o&&o.enabled){if(this.mockMode){this.currentUser={id:"mock-user-"+Date.now(),email:`${e}user@example.com`,user_metadata:{name:`${this.t(`auth.providers.${e}`)||o.label} ${this.t("auth.user")||"User"}`,avatar_url:`https://ui-avatars.com/api/?name=${o.icon}&background=3b82f6&color=fff`,provider:e}};const n=this.t(`auth.providers.${e}`)||o.label;return this.showNotification(this.t("auth.loginSuccessMock",{provider:n})||`${n} login completed! (Mock mode) 🎉`),void this.render()}try{if([].includes(e))return this.currentUser={id:`mock-${e}-user-`+Date.now(),email:`${e}user@example.com`,user_metadata:{name:`${o.label} 사용자 (Mock)`,avatar_url:`https://ui-avatars.com/api/?name=${o.label}&background=3b82f6&color=fff`,provider:e}},this.showNotification(`${o.label} 로그인 완료! (설정 미완료로 Mock 모드) 🎉`),void this.render();if([].includes(e))return this.currentUser={id:"mock-user-"+Date.now(),email:`${e}user@example.com`,user_metadata:{name:`${o.label} 사용자`,avatar_url:`https://ui-avatars.com/api/?name=${o.icon}&background=3b82f6&color=fff`,provider:e}},this.showNotification(`${o.label} 로그인 완료! (설정 미완료로 Mock 모드) 🎉`),void this.render();const n=this.getSupabaseProvider(e),t=this.getProviderOptions(e),{error:i}=await this.supabase.auth.signInWithOAuth({provider:n,options:t});if(i)throw i;this.showNotification(`${o.label} 로그인 중... 🔄`)}catch(i){if("kakao"===e)return void this.showNotification("카카오 로그인에 실패했습니다. 콘솔에서 디버깅 정보를 확인해주세요. 🥕");let a="로그인에 실패했습니다.";if((null==(n=i.message)?void 0:n.includes("not supported"))||(null==(t=i.message)?void 0:t.includes("not enabled")))return this.currentUser={id:"mock-user-"+Date.now(),email:`${e}user@example.com`,user_metadata:{name:`${o.label} 사용자`,avatar_url:`https://ui-avatars.com/api/?name=${o.icon}&background=3b82f6&color=fff`,provider:e}},this.showNotification(`${o.label} 로그인 완료! (설정 미완료로 Mock 모드) ⚠️`),void this.render();alert(a)}}else alert(this.t("auth.unsupportedProvider")||"Unsupported login method.")}async logout(){if(this.mockMode)return this.currentUser=null,void this.render();try{await this.supabase.auth.signOut(),localStorage.removeItem("kommentio_custom_user"),localStorage.removeItem("kommentio_custom_token");const e=window.location.href.split("#")[0];window.history.replaceState(null,"",e),this.currentUser=null,this.render(),this.showNotification("로그아웃되었습니다. 👋")}catch(e){}}async handleKoreanSocialLogin(e){}async handleKakaoLogin(){if(!this.getKakaoConfig().apiKey)return this.currentUser={id:"mock-kakao-user-"+Date.now(),email:"kakaouser@example.com",user_metadata:{name:"Kakao 사용자",avatar_url:"https://ui-avatars.com/api/?name=Kakao&background=fee500&color=000",provider:"kakao"}},this.showNotification("Kakao 로그인 완료! (설정 미완료로 Mock 모드) 🎉"),void this.render();try{return await this.loadKakaoSDK(),new Promise(((e,n)=>{window.Kakao.Auth.login({success:async t=>{try{window.Kakao.API.request({url:"/v2/user/me",success:async n=>{await this.loginWithKakaoUser(n,t.access_token),e()},fail:n})}catch(o){n(o)}},fail:n})}))}catch(e){this.currentUser={id:"mock-kakao-user-"+Date.now(),email:"kakaouser@example.com",user_metadata:{name:"Kakao 사용자",avatar_url:"https://ui-avatars.com/api/?name=Kakao&background=fee500&color=000",provider:"kakao"}},this.showNotification("Kakao 로그인 완료! (SDK 로드 실패로 Mock 모드) 🎉"),this.render()}}async loadKakaoSDK(){if(window.Kakao)return;await this.loadScript("https://developers.kakao.com/sdk/js/kakao.js");const e=this.getKakaoConfig();window.Kakao.init(e.apiKey)}getKakaoConfig(){return{apiKey:this.options.kakaoApiKey||process.env.VITE_KAKAO_API_KEY,redirectUri:`${window.location.origin}/auth/kakao/callback`}}async loginWithKakaoUser(e,n){var t,o,i,a,r,s,m;const c={id:`kakao_${e.id}`,email:(null==(t=e.kakao_account)?void 0:t.email)||`kakao_${e.id}@kakao.local`,user_metadata:{name:(null==(i=null==(o=e.kakao_account)?void 0:o.profile)?void 0:i.nickname)||"카카오 사용자",avatar_url:null==(r=null==(a=e.kakao_account)?void 0:a.profile)?void 0:r.profile_image_url,provider:"kakao",provider_id:e.id.toString(),full_name:null==(m=null==(s=e.kakao_account)?void 0:s.profile)?void 0:m.nickname}};await this.loginWithCustomUser(c,n),this.showNotification("카카오 로그인 완료! 🎉")}async loginWithCustomUser(e,n){try{this.currentUser={id:e.id,email:e.email,user_metadata:e.user_metadata},localStorage.setItem("kommentio_custom_user",JSON.stringify(this.currentUser)),localStorage.setItem("kommentio_custom_token",n),this.render()}catch(t){throw t}}async likeComment(e){try{const{error:n}=await this.supabase.rpc("increment_likes",{comment_id:e});if(n)throw n}catch(n){}}replyTo(e){if(!this.currentUser&&!this.options.allowAnonymous)return void alert(this.t("auth.loginRequired"));const n=document.querySelector(".kommentio-reply-form");n&&n.remove();const t=document.querySelector(`[data-comment-id="${e}"]`);if(!t)return;const o=document.createElement("div");o.className="kommentio-reply-form",o.style.cssText="\n      margin-top: 1rem;\n      padding: 1rem;\n      background: var(--kommentio-bg);\n      border: 1px solid var(--kommentio-border);\n      border-radius: 6px;\n      border-left: 3px solid var(--kommentio-primary);\n    ",o.innerHTML=`\n      <div style="margin-bottom: 0.75rem;">\n        <strong style="color: var(--kommentio-primary);">${this.t("comment.reply")}</strong>\n        <button \n          onclick="this.closest('.kommentio-reply-form').remove()" \n          style="float: right; background: none; border: none; color: var(--kommentio-secondary); cursor: pointer; font-size: 1.2rem;"\n          title="${this.t("auth.cancel")}"\n        >×</button>\n      </div>\n      <form onsubmit="kommentio.handleReplySubmit(event, '${e}')">\n        <textarea \n          class="kommentio-textarea" \n          placeholder="${this.t("placeholder.markdown")}"\n          style="min-height: 80px; margin-bottom: 0.75rem;"\n          required\n        ></textarea>\n        <div style="display: flex; justify-content: space-between; align-items: center;">\n          <small class="kommentio-helper-text" style="color: var(--kommentio-secondary);">${this.t("keyboard.shortcuts")||"Ctrl+Enter: Post"}</small>\n          <div style="display: flex; gap: 0.5rem;">\n            <button \n              type="button" \n              onclick="this.closest('.kommentio-reply-form').remove()"\n              style="padding: 0.5rem 1rem; border: 1px solid var(--kommentio-border); background: var(--kommentio-bg); color: var(--kommentio-text); border-radius: 4px; cursor: pointer;"\n            >${this.t("auth.cancel")}</button>\n            <button \n              type="submit" \n              style="padding: 0.5rem 1rem; background: var(--kommentio-primary); color: white; border: none; border-radius: 4px; cursor: pointer;"\n            >${this.t("comment.reply")}</button>\n          </div>\n        </div>\n      </form>\n    `,t.appendChild(o);o.querySelector("textarea").focus(),o.scrollIntoView({behavior:"smooth",block:"nearest"})}async handleReplySubmit(e,n){e.preventDefault();const t=e.target.querySelector("textarea").value.trim();if(!t)return;const o=e.target.querySelector('button[type="submit"]'),i=o.textContent;o.disabled=!0,o.textContent=this.t("comment.submitting");try{const o=await this.createComment(t,n),i=e.target.closest(".kommentio-reply-form");i&&i.remove(),await this.loadComments(),o&&o.isSpam?this.showNotification(this.t("messages.spam.detected")):this.showNotification(this.t("messages.success.commentCreated"))}catch(a){this.showNotification(this.t("messages.error.commentFailed"))}finally{o&&(o.disabled=!1,o.textContent=i)}}switchTab(e,n){e.preventDefault();const t=e.target.closest(".kommentio-form");if(!t)return;t.querySelectorAll(".kommentio-tab").forEach((e=>e.classList.remove("kommentio-tab-active"))),e.target.classList.add("kommentio-tab-active");t.querySelectorAll(".kommentio-tab-content").forEach((e=>e.classList.remove("kommentio-tab-content-active")));const o=t.querySelector(`.kommentio-tab-${n}`);if(o&&o.classList.add("kommentio-tab-content-active"),"preview"===n){const e=t.querySelector(".kommentio-textarea");e&&this.updatePreview(e.value)}if("write"===n){const e=t.querySelector(".kommentio-textarea");e&&e.focus()}}updatePreview(e){this.lastPreviewContent!==e&&(this.previewTimeout&&clearTimeout(this.previewTimeout),this.previewTimeout=setTimeout((()=>{const n=document.querySelector(".kommentio-preview-content");if(!n)return;if(!e||""===e.trim())return n.innerHTML=`<span class="kommentio-text-secondary">${this.t("placeholder.markdown")}</span>`,void(this.lastPreviewContent="");const t=this.parseMarkdown(e);n.innerHTML=t,this.lastPreviewContent=e}),300))}handleKeydown(e){if(!e.ctrlKey&&!e.metaKey||"Enter"!==e.key)if(e.ctrlKey&&"Tab"===e.key){e.preventDefault();const n=document.querySelector(".kommentio-tab-active");if(n){const e="write"===n.dataset.tab?"preview":"write",t=document.querySelector(`[data-tab="${e}"]`);t&&this.switchTab({target:t,preventDefault:()=>{}},e)}}else if("Escape"!==e.key);else{const n=document.querySelector(".kommentio-tab-active");if(n&&"preview"===n.dataset.tab){e.preventDefault();const n=document.querySelector('[data-tab="write"]');n&&this.switchTab({target:n,preventDefault:()=>{}},"write")}}else{e.preventDefault();const n=e.target.closest("form");n&&n.dispatchEvent(new Event("submit",{cancelable:!0}))}}}let o;function i(){const e=document.querySelector("[data-kommentio]");if(e){let n="en";if("undefined"!=typeof navigator){const e=(navigator.language||navigator.userLanguage).split("-")[0];["ko","en","ja","zh","es","fr","de","pt"].includes(e)&&(n=e)}const i={siteId:e.dataset.siteId,theme:e.dataset.theme||"light",language:e.dataset.language||n,supabaseUrl:e.dataset.supabaseUrl||null,supabaseKey:e.dataset.supabaseKey||null,claudeApiKey:e.dataset.claudeApiKey};o=new t(i),window.kommentio=o}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i(),window.Kommentio=t,window.KommentioI18n={setLanguage:function(e){return!!window.kommentio&&window.kommentio.setLanguage(e)},getLanguage:function(){return window.kommentio?window.kommentio.getLanguage():"en"},getSupportedLanguages:function(){return["ko","en","ja","zh","es","fr","de","pt"]},getLanguageName:function(e){return{ko:"한국어",en:"English",ja:"日本語",zh:"中文",es:"Español",fr:"Français",de:"Deutsch",pt:"Português"}[e]||e},t:function(e,n={}){return window.kommentio?window.kommentio.t(e,n):e}},window.waitForKommentio=function(e,n=15e3){const t=Date.now();!function o(){window.kommentio&&window.kommentio.updateSocialProviders?e(window.kommentio):Date.now()-t>n?alert("위젯 로딩이 너무 오래 걸립니다. 페이지를 새로고침해주세요."):setTimeout(o,50)}()},window.KommentioI18n={setLanguage:function(e){return!(!window.kommentio||"function"!=typeof window.kommentio.setLanguage)&&window.kommentio.setLanguage(e)},getLanguage:function(){return window.kommentio&&"function"==typeof window.kommentio.getLanguage?window.kommentio.getLanguage():"ko"},getSupportedLanguages:function(){return window.kommentio&&"function"==typeof window.kommentio.getSupportedLanguages?window.kommentio.getSupportedLanguages():["ko","en","ja","zh","es","fr","de","pt"]},getLanguageName:function(e){return{ko:"한국어",en:"English",ja:"日本語",zh:"中文",es:"Español",fr:"Français",de:"Deutsch",pt:"Português"}[e]||e},t:function(e,n={}){return window.kommentio&&"function"==typeof window.kommentio.t?window.kommentio.t(e,n):e}}}();
